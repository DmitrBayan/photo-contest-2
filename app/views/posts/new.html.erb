<% provide(:title, 'New post') %>

<%= javascript_include_tag 'application' %>
<%= render 'shared/form_errors', object: @post %>

<%= form_for :post, url: posts_path do |f| %>
  <form class="form-horizontal" role="form">
    <div class="form-group">
      <div class="col-lg-8">
        <%= f.label 'Title:' %> <br>
        <%= f.text_field :title, class: 'form-control' %>
      </div>
      <div class="col-lg-8">
        <%= f.label 'Description' %> <br>
        <%= f.text_field :description, class: 'form-control' %>
      </div>
    </div>
    <div class="col-sm-10">
          <span class="control-fileupload">
            <br>
            <%= f.file_field :photo, accept: 'image/*', onchange: 'loadFile(event)' %>
            <label for="file" class="text-left blockquote-footer ">Please choose a file on your computer.</label>
          </span>
      <div class="attached-image">
        <img id="output"/>
      </div>
      <% if current_user.provider == 'vkontakte' %>
        Or upload from VK <br>
        <small>Note: if you're upload photo via uploader, photo from VK cannot be published</small>
        <br>
        <span class="btn btn-info" data-toggle="collapse" data-target="#upload"
              aria-controls="navbarToggleExternalContent" aria-expanded="false"
              aria-label="Toggle navigation"> Open list </span>
      <% end %>
    </div>
    <div class="collapse" id="upload">
      <div class="row">
        <% if @collection.present? %>
          <% @collection.each do |item| %>
            <div class="col-vk-photo">
              <div class="card-vk-photo">
                <a><img src="<%= item %>" class="card-img-top"> </a>
                <%= f.radio_button :remote_photo, item, class: 'custom-radio' %>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <hr>
    <%= f.submit "Upload", class: "btn btn-secondary " %>
  </form>
<% end %>